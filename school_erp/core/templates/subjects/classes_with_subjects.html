{% extends "base/layout.html" %}
{% block content %}

<!-- Breadcrumb -->
<div class="mb-6 flex items-center gap-2 text-sm text-gray-500">
    <span class="font-medium text-gray-700">Subjects</span>
    <span>/</span>
    <span class="text-gray-800 font-semibold">Classes With Subjects</span>
</div>

<!-- Cards Wrapper -->
<div class="flex flex-wrap gap-8">

    <!-- Class Card -->
<div id="classesWithSubjects" class="flex flex-wrap gap-8"></div>

    </div>

    <!-- Assign Subjects Card -->
    <a href="{% url 'core:assign_subjects' %}"
       class="w-64 h-56 border-2 border-dashed border-indigo-500 rounded-xl
              flex flex-col items-center justify-center text-indigo-600
              hover:bg-indigo-50 transition">

        <i class="ri-add-line text-3xl mb-2"></i>
        <span class="font-semibold text-center">
            Assign<br>Subjects
        </span>

    </a>

    <!-- ACTION ICONS -->
<!-- <div class="absolute top-4 right-4 flex gap-3">

    <!-- âœï¸ Edit Subjects -->
    <!-- <a href="/subjects/assign/?class_id=${cls.class_id}"
       class="text-indigo-500 hover:text-indigo-700"
       title="Edit Subjects">
        <i class="ri-pencil-line"></i>
    </a>

    <!-- ðŸ“˜ View Syllabus -->
    <!-- <a href="/syllabus/view/?class_id=${cls.class_id}"
       class="text-green-600 hover:text-green-800"
       title="View Syllabus">
        <i class="ri-book-open-line"></i>
    </a> --> 

<!-- </div> --> 


</div>

{% block page_js %}
<script>
(async () => {
  const res = await fetch("https://erp.backend.smartbus360.com/subjects/summary", {
    headers: {
      "Authorization": "Bearer " + window.ACCESS_TOKEN

    }
  });

  const data = await res.json();
  const container = document.getElementById("classesWithSubjects");
  container.innerHTML = "";

//   data.forEach(cls => {
//     container.innerHTML += `
//       <div class="bg-white w-64 rounded-xl border p-6">
//         <div class="text-2xl font-bold mb-2">${cls.class_name}</div>

//         <div class="flex items-center gap-3 mb-3">
//           <i class="ri-folder-3-fill text-indigo-500 text-xl"></i>
//           <div>
//             <div class="text-sm text-gray-500">TOTAL SUBJECTS</div>
//             <div class="font-semibold">${cls.total_subjects}</div>
//           </div>
//         </div>

//         <div class="text-sm text-gray-500">
//           TOTAL EXAM MARKS
//           <div class="font-semibold">${cls.total_subjects * 100}</div>
//         </div>
//       </div>
//     `;
//   });
data.forEach(cls => {
  container.innerHTML += `
    <div class="bg-white w-64 rounded-xl border p-6 relative">

      <!-- ACTION ICONS -->
      <div class="absolute top-4 right-4 flex gap-3">

        <!-- âœï¸ Edit Subjects -->
        <a href="/subjects/assign/?class_id=${cls.class_id}"
           class="text-indigo-500 hover:text-indigo-700"
           title="Edit Subjects">
          <i class="ri-pencil-line"></i>
        </a>

        <!-- ðŸ“˜ View Syllabus -->
        <a href="/syllabus/view/?class_id=${cls.class_id}"
           class="text-green-600 hover:text-green-800"
           title="View Syllabus">
          <i class="ri-book-open-line"></i>
        </a>

      </div>

      <div class="text-2xl font-bold mb-2">${cls.class_name}</div>

      <div class="flex items-center gap-3 mb-3">
        <i class="ri-folder-3-fill text-indigo-500 text-xl"></i>
        <div>
          <div class="text-sm text-gray-500">TOTAL SUBJECTS</div>
          <div class="font-semibold">${cls.total_subjects}</div>
        </div>
      </div>

      <div class="text-sm text-gray-500">
        TOTAL EXAM MARKS
        <div class="font-semibold">${cls.total_subjects * 100}</div>
      </div>

    </div>
  `;
});

})();
</script>
{% endblock %}



{% endblock %}
