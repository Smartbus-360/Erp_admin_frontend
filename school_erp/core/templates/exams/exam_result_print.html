<!DOCTYPE html>
<html>
<head>
<title>Exam Result</title>
<style>
body { font-family: Arial; }
table { width:100%; border-collapse: collapse; }
th, td { border:1px solid #000; padding:6px; text-align:center; }
@media print {
    button { display:none; }
}
</style>
</head>

<body>

<h2 style="text-align:center">{{ institute.name }}</h2>
<h3 style="text-align:center">{{ exam.name }} Result</h3>

<table>
<thead>
<tr>
    <th>Roll</th>
    <th>Name</th>
    {% for subject in subjects %}
    <th>{{ subject.name }}</th>
    {% endfor %}
    <th>Total</th>
</tr>
</thead>

<tbody>
{% for student, marks in results.items %}
<tr>
    <td>{{ student.roll_no }}</td>
    <td>{{ student.name }}</td>
    {% set total = 0 %}
    {% for subject in subjects %}
        {% set m = marks.get(subject.id, 0) %}
        <td>{{ m }}</td>
        {% set total = total + m %}
    {% endfor %}
    <td>{{ total }}</td>
</tr>
{% endfor %}
</tbody>
</table>

<script>
window.print();
</script>

</body>
</html>
